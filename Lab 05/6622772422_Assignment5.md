## Question 1: Create Database and Tables
### Part (a): Create database "SIIT" with 5 tables and insert at least 5 rows of data (0.6 points)
#### Step 1: Create Database
```sql
CREATE DATABASE SIIT;
USE SIIT;
```

#### Step 2: Create Tables

**Table 1: department (Create this first as it's referenced by other tables)**
```sql
CREATE TABLE department (
    dept_code VARCHAR(20) PRIMARY KEY,
    dept_name VARCHAR(50) NOT NULL
);
```

**Table 2: instructor**
```sql
CREATE TABLE instructor (
    instructor_ID INT PRIMARY KEY,
    first_name VARCHAR(20) NOT NULL,
    last_name VARCHAR(20) NOT NULL,
    dept_code VARCHAR(20),
    FOREIGN KEY (dept_code) REFERENCES department(dept_code) 
        ON UPDATE CASCADE 
        ON DELETE RESTRICT
);
```

**Table 3: student**
```sql
CREATE TABLE student (
    student_ID INT PRIMARY KEY,
    first_name VARCHAR(20) NOT NULL,
    last_name VARCHAR(20) NOT NULL,
    dept_code VARCHAR(20),
    FOREIGN KEY (dept_code) REFERENCES department(dept_code) 
        ON UPDATE CASCADE 
        ON DELETE RESTRICT
);
```

**Table 4: course**
```sql
CREATE TABLE course (
    course_ID VARCHAR(10) PRIMARY KEY,
    title VARCHAR(50) NOT NULL,
    credits INT NOT NULL,
    dept_code VARCHAR(20),
    FOREIGN KEY (dept_code) REFERENCES department(dept_code) 
        ON UPDATE CASCADE 
        ON DELETE RESTRICT
);
```

**Table 5: salary**
```sql
CREATE TABLE salary (
    instructor_ID INT PRIMARY KEY,
    dept_code VARCHAR(20),
    salary DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (instructor_ID) REFERENCES instructor(instructor_ID) 
        ON UPDATE CASCADE 
        ON DELETE CASCADE,
    FOREIGN KEY (dept_code) REFERENCES department(dept_code) 
        ON UPDATE CASCADE 
        ON DELETE RESTRICT
);
```

**Table 6: teaches**
```sql
CREATE TABLE teaches (
    instructor_ID INT,
    course_ID VARCHAR(10),
    sec_ID INT,
    semester VARCHAR(10),
    year INT,
    PRIMARY KEY (instructor_ID, course_ID, sec_ID, semester, year),
    FOREIGN KEY (instructor_ID) REFERENCES instructor(instructor_ID) 
        ON UPDATE CASCADE 
        ON DELETE CASCADE,
    FOREIGN KEY (course_ID) REFERENCES course(course_ID) 
        ON UPDATE CASCADE 
        ON DELETE CASCADE
);
```

#### Step 3: Insert Sample Data (5 rows each)
**Insert into department:**
```sql
INSERT INTO department VALUES 
('CPE', 'Computer Engineering'),
('EE', 'Electrical Engineering'),
('ME', 'Mechanical Engineering'),
('CE', 'Civil Engineering'),
('IE', 'Industrial Engineering');
```

**Insert into instructor:**
```sql
INSERT INTO instructor VALUES 
(101, 'John', 'Smith', 'CPE'),
(102, 'Jane', 'Doe', 'EE'),
(103, 'Mike', 'Johnson', 'ME'),
(104, 'Sarah', 'Brown', 'CE'),
(105, 'David', 'Wilson', 'IE');
```

**Insert into student:**
```sql
INSERT INTO student VALUES 
(1001, 'Alice', 'Cooper', 'CPE'),
(1002, 'Bob', 'Taylor', 'EE'),
(1003, 'Carol', 'White', 'ME'),
(1004, 'Dan', 'Black', 'CE'),
(1005, 'Eva', 'Green', 'IE');
```

**Insert into course:**
```sql
INSERT INTO course VALUES 
('CSS326', 'Database Programming', 3, 'CPE'),
('EES201', 'Circuit Analysis', 4, 'EE'),
('MES101', 'Thermodynamics', 3, 'ME'),
('CES301', 'Structural Analysis', 4, 'CE'),
('IES401', 'Operations Research', 3, 'IE');
```

**Insert into salary:**
```sql
INSERT INTO salary VALUES 
(101, 'CPE', 75000.00),
(102, 'EE', 80000.00),
(103, 'ME', 72000.00),
(104, 'CE', 78000.00),
(105, 'IE', 76000.00);
```

**Insert into teaches:**
```sql
INSERT INTO teaches VALUES 
(101, 'CSS326', 1, 'Fall', 2024),
(102, 'EES201', 1, 'Spring', 2024),
(103, 'MES101', 1, 'Fall', 2024),
(104, 'CES301', 1, 'Spring', 2024),
(105, 'IES401', 1, 'Fall', 2024);
```

---

### Part (b): Explain the Foreign Key Constraints (1.4 points)

The relational schema follows these rules through foreign key constraints:

**1. Instructor resignation/update affects salary:**
- `ON DELETE CASCADE` on salary table's instructor_ID foreign key
- `ON UPDATE CASCADE` on salary table's instructor_ID foreign key

**2. Instructor changes affect teaches table:**
- `ON DELETE CASCADE` on teaches table's instructor_ID foreign key
- `ON UPDATE CASCADE` on teaches table's instructor_ID foreign key

**3. Department code updates cascade to all related tables:**
- `ON UPDATE CASCADE` on all foreign keys referencing dept_code
- This affects instructor, course, salary, and student tables

**4. Department entries cannot be deleted if referenced:**
- `ON DELETE RESTRICT` on all foreign keys referencing dept_code
- Prevents deletion of department if any records reference it

**5. Course changes affect teaches table:**
- `ON DELETE CASCADE` on teaches table's course_ID foreign key
- `ON UPDATE CASCADE` on teaches table's course_ID foreign key


---

### Part (c): Can you set up foreign key relationship with department table if instructor is created first?

**Answer: No, you cannot.**

**Explanation:**
If the instructor table is created first, you cannot establish a foreign key relationship with the department table because:

1. **Referenced table must exist first**: MySQL requires the referenced table (department) to exist before you can create a foreign key constraint that references it.

2. **Referenced column must exist**: The dept_code column in the department table must exist before it can be referenced.

**Solutions:**
1. **Create tables in dependency order**: Create department table first, then instructor
2. **Add foreign key constraint later**: Create instructor table without the foreign key, then add it using ALTER TABLE:
   ```sql
   -- Create instructor without foreign key first
   CREATE TABLE instructor (
       instructor_ID INT PRIMARY KEY,
       first_name VARCHAR(20) NOT NULL,
       last_name VARCHAR(20) NOT NULL,
       dept_code VARCHAR(20)
   );
   
   -- Create department table
   CREATE TABLE department (
       dept_code VARCHAR(20) PRIMARY KEY,
       dept_name VARCHAR(50) NOT NULL
   );
   
   -- Add foreign key constraint later
   ALTER TABLE instructor 
   ADD CONSTRAINT fk_instructor_dept 
   FOREIGN KEY (dept_code) REFERENCES department(dept_code) 
   ON UPDATE CASCADE ON DELETE RESTRICT;
   ```

**Best Practice (Thanks, GPT!):** Always create parent tables (referenced tables) before child tables (referencing tables) to avoid this issue.

## Question 2: Library Database Management System

### Create Library Database with Tables: Books, Authors, Transactions, and Borrowers (0.4 points)

#### Step 1: Create Library Database
```sql
CREATE DATABASE Library;
USE Library;
```

#### Step 2: Create Tables

**Table 1: Authors**
```sql
CREATE TABLE authors (
    author_id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50)
);
```

**Table 2: Books**
```sql
CREATE TABLE books (
    book_id INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(255) NOT NULL,
    author_id INT,
    ISBN VARCHAR(13),
    publication_year INT,
    FOREIGN KEY (author_id) REFERENCES authors(author_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

**Table 3: Borrowers**
```sql
CREATE TABLE borrowers (
    borrower_id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50),
    email VARCHAR(100)
);
```

**Table 4: Transactions**
```sql
CREATE TABLE transactions (
    transaction_id INT PRIMARY KEY AUTO_INCREMENT,
    book_id INT,
    borrower_id INT,
    checkout_date DATE NOT NULL,
    return_date DATE,
    FOREIGN KEY (book_id) REFERENCES books(book_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    FOREIGN KEY (borrower_id) REFERENCES borrowers(borrower_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

#### Step 3: Insert Sample Data

**Insert Authors:**
```sql
INSERT INTO authors (first_name, last_name) VALUES 
('John', 'Doe'),
('Jane', 'Smith'),
('Mark', 'Johnson');
```

**Insert Books:**
```sql
INSERT INTO books (title, author_id, ISBN, publication_year) VALUES 
('Book1', 1, '1234567890', 2010),
('Book2', 2, '2345678901', 2015),
('Book3', 3, '3456789012', 2020);
```

**Insert Borrowers:**
```sql
INSERT INTO borrowers (first_name, last_name, email) VALUES 
('Alice', 'Johnson', 'alice@example.com'),
('Bob', 'Smith', 'bob@example.com');
```

**Insert Transactions:**
```sql
INSERT INTO transactions (book_id, borrower_id, checkout_date, return_date) VALUES 
(1, 1, '2023-09-01', '2023-09-27'),
(2, 2, '2023-09-05', '2023-09-20'),
(3, 1, '2023-09-10', '2023-09-01');
```

---

### Query Solutions:

#### (a) List all books checked out by 'Alice Johnson' with title and combined author name (0.4 points)

**Expected Output:**
```
+--------+---------------+
| title  | Author_Name   |
+--------+---------------+
| Book1  | John Doe      |
| Book3  | Mark Johnson  |
+--------+---------------+
```

**SQL Query:**
```sql
SELECT b.title, 
       CONCAT(a.first_name, ' ', a.last_name) AS Author_Name
FROM books b
JOIN authors a ON b.author_id = a.author_id
JOIN transactions t ON b.book_id = t.book_id
JOIN borrowers br ON t.borrower_id = br.borrower_id
WHERE CONCAT(br.first_name, ' ', br.last_name) = 'Alice Johnson';
```

#### (b) List all overdue books (0.4 points)

**Expected Output:**
```
+--------+----------------+-------------+
| title  | Borrower_Name  | return_date |
+--------+----------------+-------------+
| Book3  | Alice Johnson  | 2023-09-01  |
+--------+----------------+-------------+
```

**SQL Query:**
```sql
SELECT b.title,
       CONCAT(br.first_name, ' ', br.last_name) AS Borrower_Name,
       t.return_date
FROM books b
JOIN transactions t ON b.book_id = t.book_id
JOIN borrowers br ON t.borrower_id = br.borrower_id
WHERE t.return_date < CURDATE();
```

**Alternative Query (if considering overdue as books not yet returned):**
```sql
SELECT b.title,
       CONCAT(br.first_name, ' ', br.last_name) AS Borrower_Name,
       t.checkout_date,
       CASE 
           WHEN t.return_date IS NULL THEN 'Not Returned'
           ELSE t.return_date
       END AS return_date
FROM books b
JOIN transactions t ON b.book_id = t.book_id
JOIN borrowers br ON t.borrower_id = br.borrower_id
WHERE t.return_date IS NULL 
   OR t.return_date < DATE_ADD(t.checkout_date, INTERVAL 14 DAY);
```

#### (c) List all authors who have books checked out and the number of books checked out by each (0.4 points)

**Expected Output:**
```
+---------------+-------------------+
| Author_Name   | books_checked_out |
+---------------+-------------------+
| Jane Smith    |                 1 |
| John Doe      |                 1 |
| Mark Johnson  |                 1 |
+---------------+-------------------+
```

**SQL Query:**
```sql
SELECT CONCAT(a.first_name, ' ', a.last_name) AS Author_Name,
       COUNT(t.transaction_id) AS books_checked_out
FROM authors a
JOIN books b ON a.author_id = b.author_id
JOIN transactions t ON b.book_id = t.book_id
GROUP BY a.author_id, a.first_name, a.last_name
ORDER BY Author_Name;
```

#### (d) Find the borrower who has the most books taken from library (0.4 points)

**Expected Output:**
```
+----------------+-------------------+
| Borrower_Name  | books_checked_out |
+----------------+-------------------+
| Alice Johnson  |                 2 |
+----------------+-------------------+
```

**SQL Query:**
```sql
SELECT CONCAT(br.first_name, ' ', br.last_name) AS Borrower_Name,
       COUNT(t.transaction_id) AS books_checked_out
FROM borrowers br
JOIN transactions t ON br.borrower_id = t.borrower_id
GROUP BY br.borrower_id, br.first_name, br.last_name
ORDER BY books_checked_out DESC
LIMIT 1;
```

**Alternative Query (showing all borrowers with maximum count in case of tie):**
```sql
SELECT CONCAT(br.first_name, ' ', br.last_name) AS Borrower_Name,
       COUNT(t.transaction_id) AS books_checked_out
FROM borrowers br
JOIN transactions t ON br.borrower_id = t.borrower_id
GROUP BY br.borrower_id, br.first_name, br.last_name
HAVING COUNT(t.transaction_id) = (
    SELECT MAX(book_count)
    FROM (
        SELECT COUNT(transaction_id) AS book_count
        FROM transactions
        GROUP BY borrower_id
    ) AS max_books
);
```

## Question 3: Coffee Shop Database Management System

### Create Coffee Shop Database with Tables: Products, Customers, Orders, and Order_items (0.4 points)

#### Step 1: Create Coffee Shop Database
```sql
CREATE DATABASE CoffeeShop;
USE CoffeeShop;
```

#### Step 2: Create Tables

**Table 1: Products**
```sql
CREATE TABLE products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    price DECIMAL(10,2) NOT NULL
);
```

**Table 2: Customers**
```sql
CREATE TABLE customers (
    customer_id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50),
    email VARCHAR(100)
);
```

**Table 3: Orders**
```sql
CREATE TABLE orders (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT,
    order_date DATE NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

**Table 4: Order_items**
```sql
CREATE TABLE order_items (
    item_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    product_id INT,
    quantity INT NOT NULL,
    FOREIGN KEY (order_id) REFERENCES orders(order_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    FOREIGN KEY (product_id) REFERENCES products(product_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

#### Step 3: Insert Sample Data

**Insert Products:**
```sql
INSERT INTO products (name, price) VALUES 
('Espresso', 2.50),
('Latte', 3.50),
('Cappuccino', 3.00),
('Croissant', 2.00),
('Muffin', 1.50);
```

**Insert Customers:**
```sql
INSERT INTO customers (first_name, last_name, email) VALUES 
('Alice', 'Johnson', 'alice@example.com'),
('Bob', 'Smith', 'bob@example.com');
```

**Insert Orders:**
```sql
INSERT INTO orders (customer_id, order_date) VALUES 
(1, '2023-09-01'),
(2, '2023-09-05');
```

**Insert Order_items:**
```sql
INSERT INTO order_items (order_id, product_id, quantity) VALUES 
(1, 1, 2),  -- Alice: 2 Espresso
(1, 4, 1),  -- Alice: 1 Croissant
(2, 2, 1),  -- Bob: 1 Latte
(2, 5, 2);  -- Bob: 2 Muffin
```

---

### Query Solutions:

#### (a) List all orders along with customer's name and order total (0.4 points)

**Expected Output:**
```
+----------+---------------+-------------+
| order_id | customer_name | order_total |
+----------+---------------+-------------+
|        1 | Alice Johnson |        7.00 |
|        2 | Bob Smith     |        6.50 |
+----------+---------------+-------------+
```

**SQL Query:**
```sql
SELECT o.order_id,
       CONCAT(c.first_name, ' ', c.last_name) AS customer_name,
       SUM(oi.quantity * p.price) AS order_total
FROM orders o
JOIN customers c ON o.customer_id = c.customer_id
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
GROUP BY o.order_id, c.first_name, c.last_name
ORDER BY o.order_id;
```

#### (b) Calculate the total revenue for the coffee shop (0.4 points)

**Expected Output:**
```
+---------------+
| total_revenue |
+---------------+
|         13.50 |
+---------------+
```

**SQL Query:**
```sql
SELECT SUM(oi.quantity * p.price) AS total_revenue
FROM order_items oi
JOIN products p ON oi.product_id = p.product_id;
```

#### (c) Create a view to see the most popular products and list them (0.4 points)

**Expected Output:**
```
+-----------+--------------------+
| name      | total_quantity_sold|
+-----------+--------------------+
| Muffin    |                  2 |
| Espresso  |                  2 |
| Latte     |                  1 |
| Croissant |                  1 |
+-----------+--------------------+
```

**SQL Commands:**
```sql
-- Create the view
CREATE VIEW popular_products AS
SELECT p.name,
       SUM(oi.quantity) AS total_quantity_sold
FROM products p
JOIN order_items oi ON p.product_id = oi.product_id
GROUP BY p.product_id, p.name
ORDER BY total_quantity_sold DESC;

-- Query the view
SELECT * FROM popular_products;
```

#### (d) Find the top-spending customers (0.4 points)

**Expected Output:**
```
+---------------+-------------+
| customer_name | total_spent |
+---------------+-------------+
| Alice Johnson |        7.00 |
| Bob Smith     |        6.50 |
+---------------+-------------+
```

**SQL Query:**
```sql
SELECT CONCAT(c.first_name, ' ', c.last_name) AS customer_name,
       SUM(oi.quantity * p.price) AS total_spent
FROM customers c
JOIN orders o ON c.customer_id = o.customer_id
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
GROUP BY c.customer_id, c.first_name, c.last_name
ORDER BY total_spent DESC;
```

---

## Question 4: Bank Database Management System

### Create Bank Database with Tables: Customers, Accounts, and Transactions (0.4 points)

#### Step 1: Create Bank Database
```sql
CREATE DATABASE Bank;
USE Bank;
```

#### Step 2: Create Tables

**Table 1: Customers**
```sql
CREATE TABLE customers (
    customer_id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50),
    email VARCHAR(100),
    phone_number VARCHAR(15)
);
```

**Table 2: Accounts**
```sql
CREATE TABLE accounts (
    account_id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT,
    account_type ENUM('Checking', 'Savings', 'Loan') NOT NULL,
    balance DECIMAL(10,2) NOT NULL DEFAULT 0.00,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

**Table 3: Transactions**
```sql
CREATE TABLE transactions (
    transaction_id INT PRIMARY KEY AUTO_INCREMENT,
    account_id INT,
    transaction_date DATE NOT NULL,
    amount DECIMAL(10,2) NOT NULL,
    description VARCHAR(255),
    FOREIGN KEY (account_id) REFERENCES accounts(account_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

#### Step 3: Insert Sample Data

**Insert Customers:**
```sql
INSERT INTO customers (first_name, last_name, email, phone_number) VALUES 
('Alice', 'Johnson', 'alice@example.com', '123-456-7890'),
('Bob', 'Smith', 'bob@example.com', '987-654-3210');
```

**Insert Accounts:**
```sql
INSERT INTO accounts (customer_id, account_type, balance) VALUES 
(1, 'Checking', 5000.00),
(1, 'Savings', 10000.00),
(2, 'Checking', 3000.00);
```

**Insert Transactions:**
```sql
INSERT INTO transactions (account_id, transaction_date, amount, description) VALUES 
(1, '2023-09-01', -1000.00, 'Withdrawal'),
(1, '2023-09-05', 2000.00, 'Deposit'),
(2, '2023-09-02', -500.00, 'Withdrawal'),
(3, '2023-09-07', 1000.00, 'Deposit');
```

---

### Query Solutions:

#### (a) List all customers and their account types along with the total balance for each customer (0.8 points)

**Expected Output:**
```
+---------------+------------------+---------------+
| customer_name | account_types    | total_balance |
+---------------+------------------+---------------+
| Alice Johnson | Checking, Savings|      15000.00 |
| Bob Smith     | Checking         |       3000.00 |
+---------------+------------------+---------------+
```

**SQL Query:**
```sql
SELECT CONCAT(c.first_name, ' ', c.last_name) AS customer_name,
       GROUP_CONCAT(a.account_type ORDER BY a.account_type SEPARATOR ', ') AS account_types,
       SUM(a.balance) AS total_balance
FROM customers c
JOIN accounts a ON c.customer_id = a.customer_id
GROUP BY c.customer_id, c.first_name, c.last_name
ORDER BY total_balance DESC;
```

#### (b) Find the top 3 customers with the highest total balance across all accounts (0.8 points)

**Expected Output:**
```
+---------------+---------------+
| customer_name | total_balance |
+---------------+---------------+
| Alice Johnson |      15000.00 |
| Bob Smith     |       3000.00 |
+---------------+---------------+
```

**SQL Query:**
```sql
SELECT CONCAT(c.first_name, ' ', c.last_name) AS customer_name,
       SUM(a.balance) AS total_balance
FROM customers c
JOIN accounts a ON c.customer_id = a.customer_id
GROUP BY c.customer_id, c.first_name, c.last_name
ORDER BY total_balance DESC
LIMIT 3;
```

---

## Question 5: Search Engine Database Management System

### Create Search Engine Database with Tables: Web_pages, Search_queries, and Search_results (0.8 points)

#### Step 1: Create Search Engine Database
```sql
CREATE DATABASE SearchEngine;
USE SearchEngine;
```

#### Step 2: Create Tables

**Table 1: Web_pages**
```sql
CREATE TABLE web_pages (
    page_id INT PRIMARY KEY AUTO_INCREMENT,
    url VARCHAR(255) NOT NULL UNIQUE,
    title VARCHAR(255),
    content TEXT
);
```

**Table 2: Search_queries**
```sql
CREATE TABLE search_queries (
    query_id INT PRIMARY KEY AUTO_INCREMENT,
    query_text VARCHAR(255) NOT NULL,
    search_date DATE NOT NULL
);
```

**Table 3: Search_results**
```sql
CREATE TABLE search_results (
    result_id INT PRIMARY KEY AUTO_INCREMENT,
    query_id INT,
    page_id INT,
    rank INT NOT NULL,
    FOREIGN KEY (query_id) REFERENCES search_queries(query_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT,
    FOREIGN KEY (page_id) REFERENCES web_pages(page_id)
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
);
```

#### Step 3: Insert Sample Data

**Insert Web_pages:**
```sql
INSERT INTO web_pages (url, title, content) VALUES 
('http://www.example.com/page1', 'Example Page 1', 'This is the content of page 1.'),
('http://www.example.com/page2', 'Example Page 2', 'This is the content of page 2.'),
('http://www.example.com/page3', 'Example Page 3', 'This is the content of page 3.');
```

**Insert Search_queries:**
```sql
INSERT INTO search_queries (query_text, search_date) VALUES 
('MySQL tutorial', '2023-09-01'),
('Search engine', '2023-09-02');
```

**Insert Search_results:**
```sql
INSERT INTO search_results (query_id, page_id, rank) VALUES 
(1, 1, 1),  -- MySQL tutorial query: page 1 rank 1
(1, 2, 2),  -- MySQL tutorial query: page 2 rank 2
(2, 2, 1),  -- Search engine query: page 2 rank 1
(2, 3, 2);  -- Search engine query: page 3 rank 2
```

---

### Query Solutions:

#### (a) Update the content of a web page based on its URL (0.4 points)

**Expected Output:**
```
+--------+-------------------------------+---------------+----------------------------------------+
| page_id| url                           | title         | content                                |
+--------+-------------------------------+---------------+----------------------------------------+
|      1 | http://www.example.com/page1  | Example Page 1| This is the updated content of page 1.|
|      2 | http://www.example.com/page2  | Example Page 2| This is the content of page 2.        |
|      3 | http://www.example.com/page3  | Example Page 3| This is the content of page 3.        |
+--------+-------------------------------+---------------+----------------------------------------+
```

**SQL Command:**
```sql
-- Update the content
UPDATE web_pages 
SET content = 'This is the updated content of page 1.'
WHERE url = 'http://www.example.com/page1';

-- Verify the update
SELECT * FROM web_pages ORDER BY page_id;
```

#### (b) List the web pages ranked by their appearance in search results for a specific query (0.8 points)

**Expected Output:**
```
+---------------+---------------+-------------------------------+------+
| query_text    | title         | url                           | rank |
+---------------+---------------+-------------------------------+------+
| Search engine | Example Page 2| http://www.example.com/page2  |    1 |
| Search engine | Example Page 3| http://www.example.com/page3  |    2 |
+---------------+---------------+-------------------------------+------+
```

**SQL Query:**
```sql
SELECT sq.query_text,
       wp.title,
       wp.url,
       sr.rank
FROM search_queries sq
JOIN search_results sr ON sq.query_id = sr.query_id
JOIN web_pages wp ON sr.page_id = wp.page_id
WHERE sq.query_text = 'Search engine'
ORDER BY sr.rank;
```

**Alternative Query (for any specific query):**
```sql
-- For MySQL tutorial query
SELECT sq.query_text,
       wp.title,
       wp.url,
       sr.rank
FROM search_queries sq
JOIN search_results sr ON sq.query_id = sr.query_id
JOIN web_pages wp ON sr.page_id = wp.page_id
WHERE sq.query_text = 'MySQL tutorial'
ORDER BY sr.rank;
```